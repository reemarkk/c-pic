{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "prepare:windows",
      "type": "shell",
      "windows": {
        "command": "cmd",
        "args": [
          "/c",
          "if",
          "not",
          "exist",
          "bin\\windows",
          "mkdir",
          "bin\\windows"
        ],
      },
      "linux": {
        "command": "bash",
        "args": [
          "-c",
          "mkdir -p bin/windows"
        ]
      },
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": []
    },
    {
      "label": "prepare:linux",
      "type": "shell",
      "windows": {
        "command": "cmd",
        "args": [
          "/c",
          "if",
          "not",
          "exist",
          "bin\\linux",
          "mkdir",
          "bin\\linux"
        ]
      },
      "linux": {
        "command": "bash",
        "args": [
          "-c",
          "mkdir -p bin/linux"
        ]
      },
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": []
    },
    {
      "label": "i386-pc-windows-gnu",
      "dependsOn": "prepare:windows",
      "windows": {
        "type": "process",
        "command": "clang",
        "problemMatcher": [
          "$gcc"
        ]
      },
      "linux": {
        "type": "shell",
        "command": "clang-20",
      },
      "args": [
        "-Wall",
        "-Wextra",
        "-Werror",
        "-g",
        "-Qn",
        "-fuse-ld=lld",
        "-nostdinc",
        "-nostartfiles",
        "-nodefaultlibs",
        "-nostdlib",
        "-fno-ident",
        "-mno-stack-arg-probe",
        "-fno-stack-check",
        // "-flto",
        "-ffunction-sections",
        "-fdata-sections",
        "-fno-asynchronous-unwind-tables",
        // "-fomit-frame-pointer",
        "-fno-unwind-tables",
        "-fno-builtin",
        "-Wl,/MERGE:.rdata=.text,/Entry:_start,/SUBSYSTEM:CONSOLE,/ORDER:@orderfile.txt,/BASE:0x400000,/FILEALIGN:0x1000,/INCREMENTAL:NO,/DEBUG",
        "-target",
        "i386-pc-windows-gnu",
        "-o",
        "bin/windows/windows_i386.exe",
        "-DARCHITECTURE_I386",
        "-DPLATFORM_WINDOWS",
        "-DPLATFORM_WINDOWS_I386",
        "-O0",
        "src/*.c"
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      }
    },
    {
      "label": "x86_64-pc-windows-gnu",
      "dependsOn": "prepare:windows",
      "windows": {
        "type": "process",
        "command": "clang",
        "problemMatcher": [
          "$gcc"
        ]
      },
      "linux": {
        "type": "shell",
        "command": "clang-20",
      },
      "args": [
        "-Wall",
        "-Wextra",
        "-Werror",
        "-g",
        // "-fno-omit-frame-pointer",
        "-Qn",
        "-fuse-ld=lld",
        "-nostdinc",
        "-nostartfiles",
        "-nodefaultlibs",
        "-nostdlib",
        "-fno-ident",
        "-mno-stack-arg-probe",
        "-fno-stack-check",
        // "-flto",
        "-ffunction-sections",
        "-fdata-sections",
        "-fno-asynchronous-unwind-tables",
        "-fno-unwind-tables",
        "-fno-builtin",
        "-Wl,/MERGE:.rdata=.text,/Entry:_start,/SUBSYSTEM:CONSOLE,/ORDER:@orderfile.txt,/DEBUG",
        "-target",
        "x86_64-pc-windows-gnu",
        "-o",
        "bin/windows/windows_x86_64.exe",
        "-DARCHITECTURE_X86_64",
        "-DPLATFORM_WINDOWS",
        "-DPLATFORM_WINDOWS_X86_64",
        "-O0",
        "src/*.c",
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      }
    },
    {
      "label": "armv7a-pc-windows-gnu",
      "dependsOn": "prepare:windows",
      "command": "clang",
      "windows": {
        "type": "process",
        "command": "clang",
        "problemMatcher": [
          "$gcc"
        ]
      },
      "linux": {
        "type": "shell",
        "command": "clang-20",
      },
      "args": [
        "-Wall",
        "-Wextra",
        "-Werror",
        "-g",
        "-Qn",
        "-fuse-ld=lld",
        "-nostdinc",
        "-nostartfiles",
        "-nodefaultlibs",
        "-nostdlib",
        "-fno-ident",
        "-mno-stack-arg-probe",
        "-fno-stack-check",
        "-flto",
        "-ffunction-sections",
        "-fdata-sections",
        "-fno-asynchronous-unwind-tables",
        "-fno-unwind-tables",
        "-fno-builtin",
        "-Wl,/MERGE:.rdata=.text,/Entry:_start,/SUBSYSTEM:CONSOLE,/ORDER:@orderfile.txt",
        "-target",
        "armv7a-pc-windows-gnu",
        "-o",
        "bin/windows/windows_arm7a.exe",
        "-DARCHITECTURE_ARM7A",
        "-DPLATFORM_WINDOWS",
        "-DPLATFORM_WINDOWS_ARM7A",
        "-O0",
        "src/*.c",
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      }
    },
    {
      "label": "aarch64-pc-windows-gnu",
      "dependsOn": "prepare:windows",
      "windows": {
        "type": "process",
        "command": "clang",
        "problemMatcher": [
          "$gcc"
        ]
      },
      "linux": {
        "type": "shell",
        "command": "clang-20",
      },
      "args": [
        "-Wall",
        "-Wextra",
        "-Werror",
        "-g",
        "-Qn",
        "-fuse-ld=lld",
        "-nostdinc",
        "-nostartfiles",
        "-nodefaultlibs",
        "-nostdlib",
        "-fno-ident",
        "-mno-stack-arg-probe",
        "-fno-stack-check",
        "-flto",
        "-ffunction-sections",
        "-fdata-sections",
        "-fno-asynchronous-unwind-tables",
        "-fno-unwind-tables",
        "-fno-builtin",
        "-Wl,/MERGE:.rdata=.text,/Entry:_start,/SUBSYSTEM:CONSOLE,/ORDER:@orderfile.txt",
        "-target",
        "aarch64-unknown-windows-gnu",
        "-o",
        "bin/windows/windows_aarch64.exe",
        "-DARCHITECTURE_AARCH64",
        "-DPLATFORM_WINDOWS",
        "-DPLATFORM_WINDOWS_AARCH64",
        "-O0",
        "src/*.c",
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      }
    },
    {
      "label": "i386-unknown-linux-gnu",
      "dependsOn": "prepare:linux",
      "windows": {
        "type": "process",
        "command": "clang",
        "problemMatcher": [
          "$gcc"
        ]
      },
      "linux": {
        "type": "shell",
        "command": "clang-20",
      },
      "args": [
        "-Wall",
        "-Wextra",
        "-Werror",
        "-g",
        "-Qn",
        "-fuse-ld=lld",
        "-nostdinc",
        "-nostartfiles",
        "-nodefaultlibs",
        "-nostdlib",
        "-fno-ident",
        "-mno-stack-arg-probe",
        "-fno-stack-check",
        "-flto",
        "-ffunction-sections",
        "-fdata-sections",
        "-fno-asynchronous-unwind-tables",
        "-fno-unwind-tables",
        "-fno-builtin",
        "-Wl,-T,linker.script,-e,_start,--gc-sections",
        "-target",
        "i386-unknown-linux-gnu",
        "-o",
        "bin/linux/linux_i386.elf",
        "-DARCHITECTURE_I386",
        "-DPLATFORM_LINUX",
        "-DPLATFORM_LINUX_I386",
        "-O0",
        "src/*.c"
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      }
    },
    {
      "label": "x86_64-unknown-linux-gnu",
      "dependsOn": "prepare:linux",
      "windows": {
        "type": "process",
        "command": "clang",
        "problemMatcher": [
          "$gcc"
        ]
      },
      "linux": {
        "type": "shell",
        "command": "clang-20",
      },
      "args": [
        "-Wall",
        "-Wextra",
        "-Werror",
        "-g",
        "-Qn",
        "-fuse-ld=lld",
        "-nostdinc",
        "-nostartfiles",
        "-nodefaultlibs",
        "-nostdlib",
        "-fno-ident",
        "-mno-stack-arg-probe",
        "-fno-stack-check",
        "-flto",
        "-ffunction-sections",
        "-fdata-sections",
        "-fno-asynchronous-unwind-tables",
        "-fno-unwind-tables",
        "-fno-builtin",
        "-fno-asynchronous-unwind-tables",
        "-fno-unwind-tables",
        "-fno-builtin",
        "-Wl,-T,linker.script,-e,_start,--gc-sections",
        "-target",
        "x86_64-unknown-linux-gnu",
        "-o",
        "bin/linux/linux_x86_64.elf",
        "-DARCHITECTURE_X86_64",
        "-DPLATFORM_LINUX",
        "-DPLATFORM_LINUX_X86_64",
        "-O0",
        "src/*.c",
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      }
    },
    {
      "label": "aarch64-unknown-linux-gnu",
      "dependsOn": "prepare:linux",
      "windows": {
        "type": "process",
        "command": "clang",
        "problemMatcher": [
          "$gcc"
        ]
      },
      "linux": {
        "type": "shell",
        "command": "clang-20",
      },
      "args": [
        "-Wall",
        "-Wextra",
        "-Werror",
        "-g",
        "-Qn",
        "-fuse-ld=lld",
        "-nostdinc",
        "-nostartfiles",
        "-nodefaultlibs",
        "-nostdlib",
        "-fno-ident",
        "-mno-stack-arg-probe",
        "-fno-stack-check",
        "-flto",
        "-ffunction-sections",
        "-fdata-sections",
        "-fno-asynchronous-unwind-tables",
        "-fno-unwind-tables",
        "-fno-builtin",
        "-Wl,-T,linker.script,-e,_start,--gc-sections",
        "-target",
        "aarch64-unknown-linux-gnu",
        "-o",
        "bin/linux/linux_aarch64.elf",
        "-DARCHITECTURE_AARCH64",
        "-DPLATFORM_LINUX",
        "-DPLATFORM_LINUX_AARCH64",
        "-O0",
        "src/*.c",
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      }
    },
    {
      "label": "extract:windows:i386",
      "dependsOn": "i386-pc-windows-gnu",
      "type": "process",
      "windows": {
        "command": "llvm-objcopy",
      },
      "linux": {
        "command": "llvm-objcopy-20",
      },
      "args": [
        "--dump-section=.text=bin/windows/windows_i386.bin",
        "bin/windows/windows_i386.exe"
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": []
    },
    {
      "label": "extract:windows:x86_64",
      "dependsOn": "x86_64-pc-windows-gnu",
      "type": "process",
      "windows": {
        "command": "llvm-objcopy",
      },
      "linux": {
        "command": "llvm-objcopy-20",
      },
      "args": [
        "--dump-section=.text=bin/windows/windows_x86_64.bin",
        "bin/windows/windows_x86_64.exe"
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": []
    },
    {
      "label": "extract:windows:arm7a",
      "dependsOn": "armv7a-pc-windows-gnu",
      "type": "process",
      "windows": {
        "command": "llvm-objcopy",
      },
      "linux": {
        "command": "llvm-objcopy-20",
      },
      "args": [
        "--dump-section=.text=bin/windows/windows_arm7a.bin",
        "bin/windows/windows_arm7a.exe"
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": []
    },
    {
      "label": "extract:windows:aarch64",
      "dependsOn": "aarch64-pc-windows-gnu",
      "type": "process",
      "windows": {
        "command": "llvm-objcopy",
      },
      "linux": {
        "command": "llvm-objcopy-20",
      },
      "args": [
        "--dump-section=.text=bin/windows/windows_aarch64.bin",
        "bin/windows/windows_aarch64.exe"
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": []
    },
    {
      "label": "extract:linux:i386",
      "dependsOn": "i386-unknown-linux-gnu",
      "type": "process",
      "windows": {
        "command": "llvm-objcopy",
      },
      "linux": {
        "command": "llvm-objcopy-20",
      },
      "args": [
        "--dump-section=.text=bin/linux/linux_i386.bin",
        "bin/linux/linux_i386.elf"
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": []
    },
    {
      "label": "extract:linux:x86_64",
      "dependsOn": "x86_64-unknown-linux-gnu",
      "type": "process",
      "windows": {
        "command": "llvm-objcopy",
      },
      "linux": {
        "command": "llvm-objcopy-20",
      },
      "args": [
        "--dump-section=.text=bin/linux/linux_x86_64.bin",
        "bin/linux/linux_x86_64.elf"
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": []
    },
    {
      "label": "extract:linux:aarch64",
      "dependsOn": "aarch64-unknown-linux-gnu",
      "type": "process",
      "windows": {
        "command": "llvm-objcopy",
      },
      "linux": {
        "command": "llvm-objcopy-20",
      },
      "args": [
        "--dump-section=.text=bin/linux/linux_aarch64.bin",
        "bin/linux/linux_aarch64.elf"
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": []
    },
    {
      "label": "dump:windows:i386",
      "dependsOn": "extract:windows:i386",
      "type": "shell",
      "windows": {
        "command": "cmd.exe",
        "args": [
          "/c",
          "llvm-objdump -d -s -j .text bin/windows/windows_i386.exe > bin/windows/windows_i386.txt && llvm-objdump -h bin/windows/windows_i386.exe >> bin/windows/windows_i386.txt"
        ]
      },
      "linux": {
        "command": "bash",
        "args": [
          "-c",
          "llvm-objdump-20 -d -s -j .text bin/windows/windows_i386.exe > bin/windows/windows_i386.txt && llvm-objdump-20 -h bin/windows/windows_i386.exe >> bin/windows/windows_i386.txt"
        ]
      },
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": []
    },
    {
      "label": "dump:windows:x86_64",
      "dependsOn": "extract:windows:x86_64",
      "type": "shell",
      "windows": {
        "command": "cmd.exe",
        "args": [
          "/c",
          "llvm-objdump -d -s -j .text bin/windows/windows_x86_64.exe > bin/windows/windows_x86_64.txt && llvm-objdump -h bin/windows/windows_x86_64.exe >> bin/windows/windows_x86_64.txt"
        ],
      },
      "linux": {
        "command": "bash",
        "args": [
          "-c",
          "llvm-objdump-20 -d -s -j .text bin/windows/windows_x86_64.exe > bin/windows/windows_x86_64.txt && llvm-objdump-20 -h bin/windows/windows_x86_64.exe >> bin/windows/windows_x86_64.txt"
        ]
      },
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": []
    },
    {
      "label": "dump:windows:arm7a",
      "dependsOn": "extract:windows:arm7a",
      "type": "shell",
      "windows": {
        "command": "cmd.exe",
        "args": [
          "/c",
          "llvm-objdump -d -s -j .text bin/windows/windows_arm7a.exe > bin/windows/windows_arm7a.txt && llvm-objdump -h bin/windows/windows_arm7a.exe >> bin/windows/windows_arm7a.txt"
        ],
      },
      "linux": {
        "command": "bash",
        "args": [
          "-c",
          "llvm-objdump-20 -d -s -j .text bin/windows/windows_arm7a.exe > bin/windows/windows_arm7a.txt && llvm-objdump-20 -h bin/windows/windows_arm7a.exe >> bin/windows/windows_arm7a.txt"
        ]
      },
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": []
    },
    {
      "label": "dump:windows:aarch64",
      "dependsOn": "extract:windows:aarch64",
      "type": "shell",
      "windows": {
        "command": "cmd.exe",
        "args": [
          "/c",
          "llvm-objdump -d -s -j .text bin/windows/windows_aarch64.exe > bin/windows/windows_aarch64.txt && llvm-objdump -h bin/windows/windows_aarch64.exe >> bin/windows/windows_aarch64.txt"
        ],
      },
      "linux": {
        "command": "bash",
        "args": [
          "-c",
          "llvm-objdump-20 -d -s -j .text bin/windows/windows_aarch64.exe > bin/windows/windows_aarch64.txt && llvm-objdump-20 -h bin/windows/windows_aarch64.exe >> bin/windows/windows_aarch64.txt"
        ]
      },
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": []
    },
    {
      "label": "dump:linux:i386",
      "dependsOn": "extract:linux:i386",
      "type": "shell",
      "windows": {
        "command": "cmd.exe",
        "args": [
          "/c",
          "llvm-objdump -d -s -j .text bin/linux/linux_i386.elf > bin/linux/linux_i386.txt && llvm-objdump -h bin/linux/linux_i386.elf >> bin/linux/linux_i386.txt"
        ],
      },
      "linux": {
        "command": "bash",
        "args": [
          "-c",
          "llvm-objdump-20 -d -s -j .text bin/linux/linux_i386.elf > bin/linux/linux_i386.txt && llvm-objdump-20 -h bin/linux/linux_i386.elf >> bin/linux/linux_i386.txt"
        ]
      },
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": []
    },
    {
      "label": "dump:linux:x86_64",
      "dependsOn": "extract:linux:x86_64",
      "type": "shell",
      "windows": {
        "args": [
          "/c",
          "llvm-objdump -d -s -j .text bin/linux/linux_x86_64.elf > bin/linux/linux_x86_64.txt && llvm-objdump -h bin/linux/linux_x86_64.elf >> bin/linux/linux_x86_64.txt"
        ],
      },
      "linux": {
        "command": "bash",
        "args": [
          "-c",
          "llvm-objdump-20 -d -s -j .text bin/linux/linux_x86_64.elf > bin/linux/linux_x86_64.txt && llvm-objdump-20 -h bin/linux/linux_x86_64.elf >> bin/linux/linux_x86_64.txt"
        ]
      },
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": []
    },
    {
      "label": "dump:linux:aarch64",
      "dependsOn": "extract:linux:aarch64",
      "type": "shell",
      "windows": {
        "args": [
          "/c",
          "llvm-objdump -d -s -j .text bin/linux/linux_aarch64.elf > bin/linux/linux_aarch64.txt && llvm-objdump -h bin/linux/linux_aarch64.elf >> bin/linux/linux_aarch64.txt"
        ],
      },
      "linux": {
        "command": "bash",
        "args": [
          "-c",
          "llvm-objdump-20 -d -s -j .text bin/linux/linux_aarch64.elf > bin/linux/linux_aarch64.txt && llvm-objdump-20 -h bin/linux/linux_aarch64.elf >> bin/linux/linux_aarch64.txt"
        ]
      },
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": []
    },
    {
      "label": "Build All",
      "dependsOrder": "parallel",
      "dependsOn": [
        "dump:windows:i386",
        "dump:windows:x86_64",
        "dump:windows:arm7a",
        "dump:windows:aarch64",
        "dump:linux:i386",
        "dump:linux:x86_64",
        "dump:linux:aarch64",
      ],
      "group": {
        "kind": "build",
        "isDefault": true,
        "name": "Build All Targets"
      }
    }
  ]
}